// import React from "react";
// import "./index.css";


// export default function Popup() {

//   return (
//     <div className='w-screen  h-screen   h-full bg-[#000000]/80 flex-col justify-end items-center gap-[33px] inline-flex'>
// <div className="w-[465px] h-[689.89px] px-[60px] py-[40px] bg-[#101014] mb-[65px] rounded-[16px] flex-col justify-center items-center gap-[35px] inline-flex">
//   <div className="self-stretch px-[14px] justify-center items-center gap-[14px] inline-flex">
//     <div className="grow shrink basis-0 text-[#ffffff] text-[18px] font-[500] font-['Inter'] capitalize tracking-tight">Deploy agent</div>
//   </div>
//   <div className="self-stretch h-[552.89px] flex-col justify-start items-center gap-[14px] flex">
//     <div className="w-[114px] h-[114px] bg-[#d9d9d9]/5 rounded-[96px] justify-center items-center gap-[14px] inline-flex">
//     <svg xmlns="http://www.w3.org/2000/svg" width="22" height="21" viewBox="0 0 22 21" fill="none">
//   <path d="M17.5327 12.0009C17.2675 12.0009 17.0131 12.1062 16.8256 12.2938C16.6381 12.4813 16.5327 12.7357 16.5327 13.0009V13.3809L15.0527 11.9009C14.5301 11.3824 13.8238 11.0915 13.0877 11.0915C12.3516 11.0915 11.6453 11.3824 11.1227 11.9009L10.4227 12.6009L7.94272 10.1209C7.41284 9.61648 6.70928 9.33516 5.97772 9.33516C5.24615 9.33516 4.5426 9.61648 4.01272 10.1209L2.53272 11.6009V6.00087C2.53272 5.73566 2.63807 5.4813 2.82561 5.29377C3.01315 5.10623 3.2675 5.00087 3.53272 5.00087H10.5327C10.7979 5.00087 11.0523 4.89552 11.2398 4.70798C11.4274 4.52044 11.5327 4.26609 11.5327 4.00087C11.5327 3.73566 11.4274 3.4813 11.2398 3.29377C11.0523 3.10623 10.7979 3.00087 10.5327 3.00087H3.53272C2.73707 3.00087 1.974 3.31694 1.41139 3.87955C0.848786 4.44216 0.532715 5.20522 0.532715 6.00087V18.0009C0.532715 18.7965 0.848786 19.5596 1.41139 20.1222C1.974 20.6848 2.73707 21.0009 3.53272 21.0009H15.5327C16.3284 21.0009 17.0914 20.6848 17.654 20.1222C18.2167 19.5596 18.5327 18.7965 18.5327 18.0009V13.0009C18.5327 12.7357 18.4274 12.4813 18.2398 12.2938C18.0523 12.1062 17.7979 12.0009 17.5327 12.0009ZM3.53272 19.0009C3.2675 19.0009 3.01315 18.8955 2.82561 18.708C2.63807 18.5204 2.53272 18.2661 2.53272 18.0009V14.4309L5.43272 11.5309C5.57963 11.3909 5.77478 11.3128 5.97772 11.3128C6.18065 11.3128 6.37581 11.3909 6.52272 11.5309L9.69272 14.7009L13.9927 19.0009H3.53272ZM16.5327 18.0009C16.5306 18.1922 16.4675 18.3778 16.3527 18.5309L11.8427 14.0009L12.5427 13.3009C12.6144 13.2277 12.7 13.1696 12.7944 13.1299C12.8889 13.0902 12.9903 13.0698 13.0927 13.0698C13.1952 13.0698 13.2966 13.0902 13.391 13.1299C13.4855 13.1696 13.571 13.2277 13.6427 13.3009L16.5327 16.2109V18.0009ZM21.2427 3.29087L18.2427 0.290873C18.1476 0.199832 18.0355 0.128467 17.9127 0.0808729C17.6693 -0.0191451 17.3962 -0.0191451 17.1527 0.0808729C17.03 0.128467 16.9178 0.199832 16.8227 0.290873L13.8227 3.29087C13.6344 3.47918 13.5286 3.73457 13.5286 4.00087C13.5286 4.26718 13.6344 4.52257 13.8227 4.71087C14.011 4.89918 14.2664 5.00497 14.5327 5.00497C14.799 5.00497 15.0544 4.89918 15.2427 4.71087L16.5327 3.41087V9.00087C16.5327 9.26609 16.6381 9.52045 16.8256 9.70798C17.0131 9.89552 17.2675 10.0009 17.5327 10.0009C17.7979 10.0009 18.0523 9.89552 18.2398 9.70798C18.4274 9.52045 18.5327 9.26609 18.5327 9.00087V3.41087L19.8227 4.71087C19.9157 4.8046 20.0263 4.879 20.1481 4.92976C20.27 4.98053 20.4007 5.00667 20.5327 5.00667C20.6647 5.00667 20.7954 4.98053 20.9173 4.92976C21.0392 4.879 21.1498 4.8046 21.2427 4.71087C21.3364 4.61791 21.4108 4.50731 21.4616 4.38545C21.5124 4.26359 21.5385 4.13289 21.5385 4.00087C21.5385 3.86886 21.5124 3.73816 21.4616 3.6163C21.4108 3.49444 21.3364 3.38384 21.2427 3.29087Z" fill="#868686" fill-opacity="0.4"/>
// </svg>
//     </div>
//     <div className="self-stretch h-[424.89px] flex-col justify-start items-start gap-[18px] flex">
//       <div className="w-[385px] px-[14px] justify-center items-center gap-2.5 inline-flex">
//         <div className="grow shrink basis-0 text-[#ffffff]/80 text-[14px] font-[500] font-['Inter'] capitalize tracking-tight">agent details</div>
//       </div>
//       <div className="self-stretch h-[389.89px] flex-col justify-center items-start gap-[40px] flex">
//         <div className="self-stretch h-[295px]  flex-col justify-start items-start gap-[25px] flex">

//           <input type="number" placeholder="API key"  className="w-[422px] h-[54.42px] px-[21px] text-start text-[#ffffff] text-[18px] placeholder:text-[18px] placeholder:font-normal placeholder:text-[#ffffff]/30 font-semibold font-['Inter'] capitalize tracking-tight border-0 focus:outline-none bg-[#ffffff]/5  rounded-[11.44px] flex items-center justify-center px-4 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none" />
//           <input type="number" placeholder="Enter Game"  className="w-[422px] h-[54.42px] px-[21px] text-start text-[#ffffff] text-[18px] placeholder:text-[18px] placeholder:font-normal  placeholder:text-[#ffffff]/30 font-semibold font-['Inter'] capitalize tracking-tight border-0 focus:outline-none bg-[#ffffff]/5  rounded-[11.44px] flex items-center justify-center px-4 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none" />
//           <input type="number" placeholder="Private key"  className="w-[422px] h-[54.42px] px-[21px] text-start text-[#ffffff] text-[18px] placeholder:text-[18px] placeholder:font-normal placeholder:text-[#ffffff]/30 font-semibold font-['Inter'] capitalize tracking-tight border-0 focus:outline-none bg-[#ffffff]/5  rounded-[11.44px] flex items-center justify-center px-4 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none" />
//           <input type="number" placeholder="select Model"  className="w-[422px] h-[54.42px] px-[21px] text-start text-[#ffffff] text-[18px] placeholder:text-[18px] placeholder:font-normal placeholder:text-[#ffffff]/30 font-semibold font-['Inter'] capitalize tracking-tight border-0 focus:outline-none bg-[#ffffff]/5  rounded-[11.44px] flex items-center justify-center px-4 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none" />

//         </div>
//         <div className="self-stretch h-[55px] px-[21px] py-2.5 bg-[#ffffff] rounded-[11.44px] justify-center items-center gap-2.5 inline-flex">
//             <div className="text-black text-base font-semibold font-['Inter'] capitalize tracking-tight">Submit</div>
//           </div>
//       </div>
//     </div>
//   </div>
// </div>
// </div>


//   );
// }

import React, { useState } from "react";
import "./index.css";

export default function Popup() {
  // Define state for each input field and for showing the server response.
  const [apiKey, setApiKey] = useState("");
  const [enterGame, setEnterGame] = useState("");
  const [privateKey, setPrivateKey] = useState("");
  const [selectModel, setSelectModel] = useState("");
  const [responseMessage, setResponseMessage] = useState("");

  // Handle form submission by calling the backend encrypt route.
  const handleSubmit = async () => {
    // Prepare the payload.
    // In this example we pack the game and model details inside `user_info`.
    const payload = {
      openai_api_key: apiKey,
      wallet_private_key: privateKey,
      user_info: {
        game: enterGame,
        model: selectModel,
      },
    };

    try {
      const response = await fetch("http://localhost:3000/encrypt", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(payload),
      });

      const data = await response.json();

      if (response.ok) {
        // Display the record ID returned from the backend.
        setResponseMessage(`Record created with ID: ${data.record_id}`);
      } else {
        setResponseMessage(`Error: ${data.error}`);
      }
    } catch (error) {
      setResponseMessage(`Error: ${error.message}`);
    }
  };

  return (
    <div className="w-screen h-screen bg-[#000000]/80 flex-col justify-end items-center gap-[33px] inline-flex">
      <div className="w-[465px] h-[689.89px] px-[60px] py-[40px] bg-[#101014] mb-[65px] rounded-[16px] flex-col justify-center items-center gap-[35px] inline-flex">
        <div className="self-stretch px-[14px] justify-center items-center gap-[14px] inline-flex">
          <div className="grow shrink basis-0 text-[#ffffff] text-[18px] font-[500] font-['Inter'] capitalize tracking-tight">
            Deploy agent
          </div>
        </div>
        <div className="self-stretch h-[552.89px] flex-col justify-start items-center gap-[14px] flex">
          <div className="w-[114px] h-[114px] bg-[#d9d9d9]/5 rounded-[96px] justify-center items-center gap-[14px] inline-flex">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="21"
              viewBox="0 0 22 21"
              fill="none"
            >
              <path
                d="M17.5327 12.0009C17.2675 12.0009 17.0131 12.1062 16.8256 12.2938C16.6381 12.4813 16.5327 12.7357 16.5327 13.0009V13.3809L15.0527 11.9009C14.5301 11.3824 13.8238 11.0915 13.0877 11.0915C12.3516 11.0915 11.6453 11.3824 11.1227 11.9009L10.4227 12.6009L7.94272 10.1209C7.41284 9.61648 6.70928 9.33516 5.97772 9.33516C5.24615 9.33516 4.5426 9.61648 4.01272 10.1209L2.53272 11.6009V6.00087C2.53272 5.73566 2.63807 5.4813 2.82561 5.29377C3.01315 5.10623 3.2675 5.00087 3.53272 5.00087H10.5327C10.7979 5.00087 11.0523 4.89552 11.2398 4.70798C11.4274 4.52044 11.5327 4.26609 11.5327 4.00087C11.5327 3.73566 11.4274 3.4813 11.2398 3.29377C11.0523 3.10623 10.7979 3.00087 10.5327 3.00087H3.53272C2.73707 3.00087 1.974 3.31694 1.41139 3.87955C0.848786 4.44216 0.532715 5.20522 0.532715 6.00087V18.0009C0.532715 18.7965 0.848786 19.5596 1.41139 20.1222C1.974 20.6848 2.73707 21.0009 3.53272 21.0009H15.5327C16.3284 21.0009 17.0914 20.6848 17.654 20.1222C18.2167 19.5596 18.5327 18.7965 18.5327 18.0009V13.0009C18.5327 12.7357 18.4274 12.4813 18.2398 12.2938C18.0523 12.1062 17.7979 12.0009 17.5327 12.0009ZM3.53272 19.0009C3.2675 19.0009 3.01315 18.8955 2.82561 18.708C2.63807 18.5204 2.53272 18.2661 2.53272 18.0009V14.4309L5.43272 11.5309C5.57963 11.3909 5.77478 11.3128 5.97772 11.3128C6.18065 11.3128 6.37581 11.3909 6.52272 11.5309L9.69272 14.7009L13.9927 19.0009H3.53272ZM16.5327 18.0009C16.5306 18.1922 16.4675 18.3778 16.3527 18.5309L11.8427 14.0009L12.5427 13.3009C12.6144 13.2277 12.7 13.1696 12.7944 13.1299C12.8889 13.0902 12.9903 13.0698 13.0927 13.0698C13.1952 13.0698 13.2966 13.0902 13.391 13.1299C13.4855 13.1696 13.571 13.2277 13.6427 13.3009L16.5327 16.2109V18.0009ZM21.2427 3.29087L18.2427 0.290873C18.1476 0.199832 18.0355 0.128467 17.9127 0.0808729C17.6693 -0.0191451 17.3962 -0.0191451 17.1527 0.0808729C17.03 0.128467 16.9178 0.199832 16.8227 0.290873L13.8227 3.29087C13.6344 3.47918 13.5286 3.73457 13.5286 4.00087C13.5286 4.26718 13.6344 4.52257 13.8227 4.71087C14.011 4.89918 14.2664 5.00497 14.5327 5.00497C14.799 5.00497 15.0544 4.89918 15.2427 4.71087L16.5327 3.41087V9.00087C16.5327 9.26609 16.6381 9.52045 16.8256 9.70798C17.0131 9.89552 17.2675 10.0009 17.5327 10.0009C17.7979 10.0009 18.0523 9.89552 18.2398 9.70798C18.4274 9.52045 18.5327 9.26609 18.5327 9.00087V3.41087L19.8227 4.71087C19.9157 4.8046 20.0263 4.879 20.1481 4.92976C20.27 4.98053 20.4007 5.00667 20.5327 5.00667C20.6647 5.00667 20.7954 4.98053 20.9173 4.92976C21.0392 4.879 21.1498 4.8046 21.2427 4.71087C21.3364 4.61791 21.4108 4.50731 21.4616 4.38545C21.5124 4.26359 21.5385 4.13289 21.5385 4.00087C21.5385 3.86886 21.5124 3.73816 21.4616 3.6163C21.4108 3.49444 21.3364 3.38384 21.2427 3.29087Z"
                fill="#868686"
                fillOpacity="0.4"
              />
            </svg>
          </div>
          <div className="self-stretch h-[424.89px] flex-col justify-start items-start gap-[18px] flex">
            <div className="w-[385px] px-[14px] justify-center items-center gap-2.5 inline-flex">
              <div className="grow shrink basis-0 text-[#ffffff]/80 text-[14px] font-[500] font-['Inter'] capitalize tracking-tight">
                agent details
              </div>
            </div>
            <div className="self-stretch h-[389.89px] flex-col justify-center items-start gap-[40px] flex">
              <div className="self-stretch h-[295px] flex-col justify-start items-start gap-[25px] flex">
                <input
                  type="text"
                  placeholder="API key"
                  value={apiKey}
                  onChange={(e) => setApiKey(e.target.value)}
                  className="w-[422px] h-[54.42px] px-[21px] text-start text-[#ffffff] text-[18px] placeholder:text-[18px] placeholder:font-normal placeholder:text-[#ffffff]/30 font-semibold font-['Inter'] capitalize tracking-tight border-0 focus:outline-none bg-[#ffffff]/5 rounded-[11.44px] "
                />
                <input
                  type="text"
                  placeholder="Enter Game"
                  value={enterGame}
                  onChange={(e) => setEnterGame(e.target.value)}
                  className="w-[422px] h-[54.42px] px-[21px] text-start text-[#ffffff] text-[18px] placeholder:text-[18px] placeholder:font-normal placeholder:text-[#ffffff]/30 font-semibold font-['Inter'] capitalize tracking-tight border-0 focus:outline-none bg-[#ffffff]/5 rounded-[11.44px] "
                />
                <input
                  type="text"
                  placeholder="Private key"
                  value={privateKey}
                  onChange={(e) => setPrivateKey(e.target.value)}
                  className="w-[422px] h-[54.42px] px-[21px] text-start text-[#ffffff] text-[18px] placeholder:text-[18px] placeholder:font-normal placeholder:text-[#ffffff]/30 font-semibold font-['Inter'] capitalize tracking-tight border-0 focus:outline-none bg-[#ffffff]/5 rounded-[11.44px] "
                />
                <input
                  type="text"
                  placeholder="Select Model"
                  value={selectModel}
                  onChange={(e) => setSelectModel(e.target.value)}
                  className="w-[422px] h-[54.42px] px-[21px] text-start text-[#ffffff] text-[18px] placeholder:text-[18px] placeholder:font-normal placeholder:text-[#ffffff]/30 font-semibold font-['Inter'] capitalize tracking-tight border-0 focus:outline-none bg-[#ffffff]/5 rounded-[11.44px] "
                />
              </div>
              <div
                className="self-stretch h-[55px] px-[21px] py-2.5 bg-[#ffffff] rounded-[11.44px] justify-center items-center gap-2.5 inline-flex cursor-pointer"
                onClick={handleSubmit}
              >
                <div className="text-black text-base font-semibold font-['Inter'] capitalize tracking-tight">
                  Submit
                </div>
              </div>
              {/* Display the server response if available */}
              {responseMessage && (
                <div className="mt-4 text-center text-white">
                  {responseMessage}
                </div>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

